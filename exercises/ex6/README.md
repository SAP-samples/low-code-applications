# Exercise 6 - Deploy your service and application

In this section we will deploy the project to the Business Technology Platform (BTP). 


## Adjustment of the service

Actually, before we deploy, we need to slightly adjust our new service for usage in AppGyver. As per the default that we now have created, the new service would be secured with specific roles when deployed to BTP. So, any user that wanted to access the service on BTP would have to have this role assigned via a so-called role collection. To ease this process and usage of the service in AppGyver, we will remove the need for such a role.

For this on the Home Page delete the role **LCAPXXXManager** (where again XXX is your user number) under **User Roles**




## Deploy the project to BTP

Switch back to the **Home** tab. 

Now that the project is developed, click "Deploy" on the "Home" screen. You are then asked to log on to a Cloud Foundry account in BTP. 

![](/exercises/ex6/images/LCAP_64.png)  

Press **Log In** and then in the top part of the screen enter one after another:
- the Cloud Foundry Endpoint **https://api.cf.eu10.hana.ondemand.com**
- your SAP email address 
- Your global SAP password
- confirm the organization **TechEdLCAP_lcapteched2021**
- confirm the space **dev**

It is then confirmed in the lower right corner that you have logged on. Now press the **Deploy** button again. This starts the deployment and in the lower part of the screen a new tab **Task: Deploy** appears.
It will now take several minutes for the application to be deployed. When the process is finished you will see in the task tab something like this:

![](/exercises/ex6/images/LCAP_65.png) 

You can now either use the link in the output to go to the application overview page or use the link that after the deployment pops up in the upper part of the screen:

![](/exercises/ex6/images/LCAP_66.png) 

This link will from now on (after the first deployment) always be present in the project. When you click on it you will be taken to this page:

![](/exercises/ex6/images/LCAP_67.png) 

It looks very much like the preview page from last chapter. Indeed it is almost the same page, only that now everything is deployed to a an account in the BTP. Again you can click on the service links on the right and / or the UI application.

### Retrieve the service URL for use in AppGyver

In order for you to continue in the next exercise to create a new AppGyver based application which users can create new Capex requests, you need to retrieve the URL of the deployed service. Unfortunately, at this point this is not very user friendly at this point and needs to be improved: 

Click on the **service details** link:

![](/exercises/ex6/images/LCAP_68.png) 

Once again, a new browser tab opens. The URL of this new tab will be an ugly one like this:

```
https://lcapteched2021.launchpad.cfapps.eu10.hana.ondemand.com/lcapLCAPXXX.LCAPXXXLaunchpad-1.0.0/service/LCAPXXX/
```

where as always XXX is the number of your user. From this URL just copy the last part behind ***/service***

``` 
/service/LCAPXXX/
```
and add this to 

```
https://techedlcap-lcapteched2021-dev-lcapXXX-srv.cfapps.eu10.hana.ondemand.com
```

so, you get a URL like this

```
https://techedlcap-lcapteched2021-dev-lcapXXX-srv.cfapps.eu10.hana.ondemand.com/service/LCAPXXX/
```

( Note that there are 2 times XXX in this above email that you have to exchange! )

Copy this URL into your clipboard, you will need it in AppGyer.


### Addendum: Generated Code behind the scenes

You have now prepared everything to create an AppGyver application. This chapter is about additional infos about the way the project is created. If you couldn't care less and don't want to know, you can simply switch to the next exercise: [Exercise A](../exA/README.md)

We will now have a look at the code that was generated by the low code perspective in BAS while your were handling the previous chapters.

It will reveal that while we used visual editors so far for everything we did, there is actually normal code created behind the scene. This code could have been written in the same way by a developer that is more inclined to work on text based editors. ( "Could" because the developer has more degrees of freedom who the developer structures the project, while the generated code follows certain best practices ).

To enter the text based code editors you have to invoke the file explorer. To do so, select the "hamburger" like menu at the top of the left hand side pane in the Business Application Studio. Then choose View->Explorer

![](/exercises/ex6/images/LCAP_61.png)  

In the file structure that now comes up, open the **srv** folder and locate the **service.cds** file. On this file invoke a context menu and choose Open **With...->Code Editor**. You should now see the text based version of the service definition that you have created, it is in the CDS (Core Data Services) format. 

![](/exercises/ex6/images/LCAP_62.png)  

You could now change something in this text editor directly, it would immediately affect what you would see in the graphical modeler for the services. 

Such a switch of going back and forward between the text based and the visual editors does not always work (Javascript files are a problem). However, the one way hand over from the visual editors / the low code perspective to the text based editors for more professional / free style coding is one of the value propositions of low code in BAS: Get the straight forward things done really easily and fast and if the editors do not provide enough functionality to do the final 20% of the resulting applications, one can switch to the code editors and finish it there.

Continue to - [Exercise A](../exA/README.md)