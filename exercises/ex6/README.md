# Exercise 6 - Deploy your service and application

In this section we will deploy the project to the Business Technology Platform (BTP). 

## Deploy the project to BTP

Switch back to the **Home** tab. 

Now that the project is developed, click **Deploy** on the "Home" screen. You are then asked to log on to a Cloud Foundry account in BTP. 

![](/exercises/ex6/images/LCAP_64.png)  

Press the **Log In** button

![](/exercises/ex6/images/LCAP_65.png)  

Then in the top part of the screen enter one after another:
- the Cloud Foundry Endpoint **https://api.cf.eu10.hana.ondemand.com**
- the email address of the user that was assigned to you
- the password for the user that was assigned to you
- confirm the organization **TechEdLCAP_lcapteched2021**
- confirm the space **dev**

It is then confirmed in the lower right corner that you have logged on. Now the deployment starts and in the lower part of the screen a new tab **Task: Deploy** appears.
It will now take several minutes for the application to be deployed. 

## Check what's going on behind the scenes: The code of the project

While you are waiting for the project to be deployed to the BTP, we can use the time for a look behind the scenes. It is not necessary that you know any of this for developing our project, it is just meant to give you some background and show you options how you can decide to work with code at any point also.

To create the project up to this point you have not seen any code, everything was built using visual editors. However, under the hood code is created using the technologies that are part of the low code perspective of the Business Application Studio. In this project it is CAP and Fiori elements. There is also the Mobile Development Kit (MDK) and the BTP Workflow that are not covered in this hands on.

For all these technolgies whenever you change something in the visual editors code is created. The code that is created is very much the code that a developer could have written in the same way using just text editors.

In fact you can see the code. And what's more you can decide at any point in the project that from now on you'd rather carry on with textual editors adding more code / changing the generated code. With this is becomes possible not only to use the low code tools to create complete applications but also to jump start any kind of development that involves CAP, Fiori elements, MDK or the workflow. You can use the visual tools to a certain point and then switch to the code. Get the straight forward things done really easily and fast and if the editors do not provide enough functionality to do the final 20% of the resulting applications, one can switch to the code editors and finish it there.

How do switch to the code? Let's do this now.

Press the button in the left sidebar at the very top, then choose **View** and **Explorer** as entries

![](/exercises/ex6/images/LCAP_66.png) 

Now a new side pane opens at the left and it contains the file structure of our project. You can see a **db** and a **srv** folder there, both are standard CAP folders that hold the data models and the services respectively. There is also the **app** folder which holds our Fiori elements UI application, if there are more than one and additional MDK applications you can also find them in this folder.

![](/exercises/ex6/images/LCAP_67.png) 

Let's open the file **schema.cds** in the **db** folder. You can now see a text file which reflects the data models for Capex and Category that we have created using the graphical modeler. This is code in the Core Data Service (CDS) format and you could now edit it and enhance it. For CDS files this even works in both directions. You can either change the CDS file and the change is reflected in the graphical modeler and vice versa. Being able to edit in both direction doesn't work for all file types (e.g. not for Javascript files) but as a general rule you can always at any point leave the graphical editors, switch to the file structure and from then on code in text editors.

Another file that is worth mentioning is the **mta.yaml** file. If you open it, you can see that it contains almost 200 lines. This file was automatically created for you when you hit the deploy button just moments ago. This file contains important information for the deployment, what should be deployed and what depends on what, which services should instantiated on BTP and much more. Under normal circumstances a developer has to create this file manually or at best gets some parts of it generated by frameworks. Note that using the low code perspective of the Business Application Studio this is done for you behind the scenes and wouldn't it be for the background information of this current chapter you wouldn't even know that the file exists.

## Check the running service and UI after deplyomemnt

Meanwhile the deployment might be finished. If it is you will see a URL in the task tab. Also when you press the **Deploy** button at the top you will also see an entry **View last deployed**. This link will from now on always be available in your project.

![](/exercises/ex6/images/LCAP_68.png) 

Press either of them. This will take you to this page:

![](/exercises/ex6/images/LCAP_69.png) 

It looks very much like the preview page from last chapter. Indeed it is almost the same page, only that now everything is deployed to a an account in the BTP. Again you can click on the service links on the right and / or the UI application.

If you enter the **My List Report** application and press the **Create** butti√≥n, you get the same features like in preview mode, only that the business partner is now always served from the S/4 HANA Cloud system in the back:

![](/exercises/ex6/images/LCAP_610.png)

## Summary

This concludes this hands on. In just a few chapters without having to code, you have created an OData service based on CAP and a corresponding UI application based on Fiori elements and you have deployed it to SAP's Business Technology Platform. Your application complies to standard designs and comes with a lot of functionality out of the box.

There are a lot of features of the low code perspective in BAS that we haven't covered in this workshop. So, for completeness let's have a look what you could have also done on top:
- Use authentications for different user roles
    - The service in our project is set up that it can be used for any CRUD operation by users that have a user and password for the corresponding BTP subaccount. However, this is not always what's wanted. While some users might only have read access to our applications others can read and write
    - To support such scenarios one can define authorizations for the service entites and assign different privileges for different user roles. These roles then have to be assigned to users by an administrator after deployment
- Share you project
    - You can enable sharing your project by assigning it to a Git repository
    - You can then not only push your changes to the central Git repo but also allow others to collaborate on the project by sharing the project with them
    - In case of conflicts when several people work on the same project, there are simplified processes to overcome this
- Create a mobile first application with MDK
- Create a workflow
    - the workflows in the low code perspective can be easily connected to service entites, which become the trigger for the workflow once there is a new entity created
    - using one of the MDK templates, a task UI which contains the information from the entity can be easily created and assigned to user taks in an approval process




